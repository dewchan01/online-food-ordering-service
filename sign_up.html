<!DOCTYPE html>
<html>
<head>
    <title>Sign Up</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script type="text/javascript">
    function validateForm() {
        var username = document.getElementsByName("username")[0].value;
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("confirmPassword").value;
        var email = document.getElementsByName("email")[0].value;
        var phoneNumber = document.getElementsByName("phone_number")[0].value;
        var address = document.getElementById("addressField").value;

        // Regular expressions for validation
        var usernameRegex = /^[a-zA-Z0-9]+$/;
        var emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]/;
        var phoneNumberRegex = /^\d{8}$/;
        var passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,12}$/;

        // Check if the username contains only letters and numbers
        if (!username.match(usernameRegex)) {
            alert("Username can only contain letters and numbers.");
            return false;
        }
        if (!password.match(passwordRegex)) {
            alert("Please enter a valid password between 8-12 characters, including at least one special character, one capital letter, and one number.");
            return false;
        }
        // Check if the password and confirm password match
        if (hash('sha256',password) !== hash('sha256',confirmPassword)) {
            alert("Passwords do not match.");
            return false;
        }

        // Check if the email address is valid
        if (!email.match(emailRegex)) {
            alert("Please enter a valid email address.");
            return false;
        }

        // Check if the phone number contains exactly 8 digits
        if (!phoneNumber.match(phoneNumberRegex)) {
            alert("Please enter a valid 8-digit phone number.");
            return false;
        }

        // Check if the address is not empty
        if (address.trim() === "") {
            alert("Address is required.");
            return false;
        }
        return true;
    }
    </script>
</head>
<body>
    <div class="nav" style="justify-content: flex-start;">
        <div class="header">
            <a href="index.html" class="headerLogo"><img src="images/logo.png" alt="Domini's Logo" height="21" width="23">Domini's</a>
        </div>
    </div>
    <div class="login-signup">
        <h2>Create Account</h2>
        <input type="button" value="Back" id="back" onclick="window.location.href='index.html'">
        <div id="user-signup">
            <form method="post" onsubmit="return validateForm()" action="php/sign_up.php" >
                <input type="email" name="email" placeholder="Email" class="user-input" required><br>
                <input type="text" name="username" placeholder="Username" class="user-input" required><br>
                <input type="tel" name="phone_number" placeholder="Phone Number" class="user-input" required><br>
                <input type="text" name="address" id ="addressField" placeholder="Enter Your Address" class="user-input" required><br>
                <br><input type="password" name="password" id="password" placeholder="Password" class="user-input" required><br>
                <input type="password" id="confirmPassword" name="confirm_password" placeholder="Confirm Password" class="user-input" required><br>
                <p style="font-size: 20px;text-align:left;">Already got an account?<a href="login.html">Log in</a></p>
                <input type="submit" value="Create Account" class="submit-button">
            </form>
        </div>
    </div>
    
</body>
</html>
